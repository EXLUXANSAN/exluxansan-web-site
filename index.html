<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìµìŠ¤ëŸ­ìŠ¤ ì•ˆì‚° ì²´í—˜ê´€ | ê±´ê°• ì—ë„ˆì§€ ì¶©ì „ì†Œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-bright: #fefdfb; --wood-warm: #a67c52; --medical-white: #ffffff;
            --sage-green: #8da399; --text-dark: #2c2c2c;
        }
        body { font-family: 'Noto Sans KR', sans-serif; background: var(--bg-bright); color: var(--text-dark); margin: 0; line-height: 1.6; }
        
        /* [ë””ìì¸] í•œì˜¥+ë³‘ì› ì»¨ì…‰ í—¤ë” */
        header { background: #fff; padding: 50px 20px; text-align: center; border-bottom: 1px solid #f2ede4; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
        h1 { font-family: 'Gowun Batang', serif; color: var(--wood-warm); font-size: 2.3rem; margin: 0; }
        .nav-admin { position: absolute; top: 20px; right: 20px; font-size: 13px; color: #ccc; cursor: pointer; text-decoration: underline; }

        .container { max-width: 900px; margin: 40px auto; padding: 0 20px; }
        .card { background: #fff; border-radius: 20px; padding: 35px; box-shadow: 0 8px 30px rgba(0,0,0,0.04); margin-bottom: 30px; border: 1px solid #f0f0f0; }
        
        /* ìƒë‹´ ì˜ˆì•½ í¼ */
        .booking-box { background: #f9f8f6; border: 1.5px solid #ece8df; }
        input, select, textarea { width: 100%; padding: 13px; margin: 8px 0; border: 1px solid #ddd; border-radius: 10px; font-size: 15px; box-sizing: border-box; }
        .btn-main { background: var(--wood-warm); color: white; border: none; padding: 18px; width: 100%; border-radius: 50px; font-weight: bold; cursor: pointer; font-size: 1.1rem; transition: 0.3s; }
        .btn-main:hover { background: #8d623a; }

        /* [ê´€ë¦¬ ê¸°ëŠ¥] ì„¹ì…˜ ìˆ¨ê¹€ ì²˜ë¦¬ */
        #adminSection { display: none; margin-top: 50px; border-top: 2px dashed var(--wood-warm); padding-top: 50px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
        th, td { border-bottom: 1px solid #eee; padding: 12px; text-align: center; }
        th { background: #f8f9fa; color: var(--wood-warm); }

        /* í¬ìŠ¤í„° ë””ìì¸ */
        #posterArea { width: 500px; background: #fff; padding: 50px; border: 20px solid var(--bg-bright); display: none; font-family: 'Gowun Batang', serif; }
    </style>
</head>
<body>

<div class="nav-admin" onclick="checkAdmin()">ê´€ë¦¬ì ë¡œê·¸ì¸</div>

<header>
    <h1>ìµìŠ¤ëŸ­ìŠ¤(EXLUX) ì•ˆì‚° ì²´í—˜ê´€</h1>
    <p style="color: #888;">PEMF ê¸°ìˆ ë¡œ ê¹¨ìš°ëŠ” ìš°ë¦¬ ëª¸ì˜ ìì—° íšŒë³µë ¥</p>
</header>

<div class="container">
    <div class="card">
        <h2 style="font-family:'Gowun Batang'; color: var(--wood-warm);">ğŸŒ¿ ë°•ë¯¸ì˜ ì§€ì‚¬ì¥ì˜ ì§„ì‹¬</h2>
        <p>ì €í¬ ë¶€ë¶€ê°€ ì§ì ‘ ê²½í—˜í•œ ì¹˜ìœ  ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì§„ì‹¬ì„ ë‹¤í•´ ì¼€ì–´í•´ ë“œë¦½ë‹ˆë‹¤. 30ë…„ í—ˆë¦¬ í†µì¦, ë‹¹ë‡¨ ì¡°ì ˆì˜ ì–´ë ¤ì›€ì„ ë”›ê³  ì¼ì–´ì„  ê¸°ì ì„ ì´ì œ ì•ˆì‚° ì²´í—˜ê´€ì—ì„œ ì§ì ‘ ê²½í—˜í•´ ë³´ì„¸ìš”.</p>
    </div>

    <div class="card booking-box">
        <h2 style="font-family:'Gowun Batang';">ğŸ“… ì‹¤ì‹œê°„ ìƒë‹´ ë° ì²´í—˜ ì˜ˆì•½</h2>
        <form action="https://formspree.io/f/xnjbpvzl" method="POST">
            <input type="text" name="name" placeholder="ì„±í•¨" required>
            <input type="tel" name="phone" placeholder="ì—°ë½ì²˜" required>
            <select name="type">
                <option>1íšŒ ì²´í—˜ ì˜ˆì•½</option>
                <option>ê¸°ê¸° êµ¬ë§¤/ì„ëŒ€ ë¬¸ì˜</option>
                <option>ì „êµ­ ì§€ì‚¬ ê°œì„¤ ìƒë‹´</option>
            </select>
            <textarea name="msg" rows="3" placeholder="ë¶ˆí¸í•˜ì‹  ë¶€ìœ„ë¥¼ ê°„ë‹¨íˆ ì ì–´ì£¼ì„¸ìš”."></textarea>
            <button type="submit" class="btn-main">ì‹ ì²­í•˜ê¸° (ì§€ì‚¬ì¥ ì¦‰ì‹œ ì•Œë¦¼ ì „ì†¡)</button>
        </form>
    </div>

    <div id="adminSection">
        <h2 style="font-family:'Gowun Batang'; color: #555;">ğŸ“Š ì²´í—˜ ì‚¬ë¡€ ê´€ë¦¬ ë§ˆìŠ¤í„°</h2>
        
        <div class="card" style="border: 2px solid var(--wood-warm);">
            <h3>ğŸ“ ì‹ ê·œ ì²´í—˜ ì‚¬ë¡€ ë“±ë¡</h3>
            <input type="text" id="regName" placeholder="ê³ ê° ì„±í•¨">
            <input type="text" id="regSym" placeholder="ì£¼ìš” ì¦ìƒ">
            <textarea id="regRes" rows="3" placeholder="í˜¸ì „ ë‚´ìš©"></textarea>
            <button onclick="saveAndPoster()" class="btn-main" style="background:#555;">ì €ì¥ ë° í¬ìŠ¤í„° ìƒì„±</button>
        </div>

        <div class="card">
            <h3>ğŸ“‹ ë“±ë¡ëœ ì²´í—˜ ì‚¬ë¡€ ë¦¬ìŠ¤íŠ¸</h3>
            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr><th>ë‚ ì§œ</th><th>ì„±í•¨</th><th>ì¦ìƒ</th><th>ê´€ë¦¬</th></tr>
                    </thead>
                    <tbody id="caseListBody">
                        </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div id="posterArea">
    <div style="background:var(--wood-warm); color:#fff; display:inline-block; padding:5px 15px; margin-bottom:15px;">OFFICIAL REPORT 2026</div>
    <h2 style="font-size:32px; margin:10px 0;">ìµìŠ¤ëŸ­ìŠ¤ ë¦¬ì–¼ ì²´í—˜ ì‚¬ë¡€</h2>
    <hr style="border: 1.5px solid #333;">
    <p style="font-size:20px;">ì„±í•¨: <span id="pName"></span> ë‹˜</p>
    <p style="font-size:20px;">ì¦ìƒ: <span id="pSym"></span></p>
    <div style="background:#f8f8f8; padding:30px; border-radius:15px; margin-top:20px; border-left: 5px solid var(--wood-brown);">
        <p id="pRes" style="font-size:22px; line-height:1.6;"></p>
    </div>
</div>

<script>
    // ê´€ë¦¬ì ë¡œê·¸ì¸ ê¸°ëŠ¥
    function checkAdmin() {
        if(prompt("ê´€ë¦¬ì ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.") === "exlux1234") {
            document.getElementById('adminSection').style.display = 'block';
            loadCases();
            window.scrollTo(0, document.body.scrollHeight);
        } else { alert("ì•”í˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤."); }
    }

    // ë°ì´í„° ì €ì¥ ë° í¬ìŠ¤í„° ìƒì„±
    function saveAndPoster() {
        const name = document.getElementById('regName').value;
        const sym = document.getElementById('regSym').value;
        const res = document.getElementById('regRes').value;
        if(!name || !res) return alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");

        // ë¡œì»¬ ì €ì¥ì†Œì— ì €ì¥ (ê¸°ì¡´ db ë¡œì§ ìœ ì§€)
        const newCase = { id: Date.now(), date: new Date().toLocaleDateString(), name, sym, res };
        let cases = JSON.parse(localStorage.getItem('exlux_cases') || '[]');
        cases.push(newCase);
        localStorage.setItem('exlux_cases', JSON.stringify(cases));

        // í¬ìŠ¤í„° ìƒì„±
        document.getElementById('pName').innerText = name[0] + "*" + (name[name.length-1] || "");
        document.getElementById('pSym').innerText = sym;
        document.getElementById('pRes').innerText = res;
        const area = document.getElementById('posterArea');
        area.style.display = 'block';
        html2canvas(area).then(canvas => {
            const link = document.createElement('a');
            link.download = `ìµìŠ¤ëŸ­ìŠ¤_ì‚¬ë¡€_${name}.png`;
            link.href = canvas.toDataURL();
            link.click();
            area.style.display = 'none';
            loadCases();
        });
    }

    // ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
    function loadCases() {
        const cases = JSON.parse(localStorage.getItem('exlux_cases') || '[]');
        const body = document.getElementById('caseListBody');
        body.innerHTML = cases.map((item, idx) => `
            <tr>
                <td>${item.date}</td>
                <td>${item.name}</td>
                <td>${item.sym}</td>
                <td><button onclick="deleteCase(${idx})" style="color:red; border:none; background:none; cursor:pointer;">ì‚­ì œ</button></td>
            </tr>
        `).join('');
    }

    function deleteCase(idx) {
        if(confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            let cases = JSON.parse(localStorage.getItem('exlux_cases') || '[]');
            cases.splice(idx, 1);
            localStorage.setItem('exlux_cases', JSON.stringify(cases));
            loadCases();
        }
    }
</script>
</body>
</html>
